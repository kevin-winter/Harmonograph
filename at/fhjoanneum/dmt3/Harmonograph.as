package at.fhjoanneum.dmt3{	import flash.geom.Point;	import flash.display.MovieClip;	import flash.filesystem.File;	import flash.filesystem.FileStream;	import flash.filesystem.FileMode;	import flash.utils.ByteArray;	public class Harmonograph	{		var d:Number;		var go:Number;		var freqX:Number;		var freqY:Number;		var steps:Number;		var my_line:MovieClip = new MovieClip();		var points500px:Array = new Array();		var pointsNDC:Array = new Array();		var counter:Number = 0;		public function Harmonograph(freqOfX,freqOfY,startPoint,damping,accuracy:Number)		{			d = damping;			go = startPoint;			freqX = freqOfX;			freqY = freqOfY;			steps = accuracy;						createCurve();		}		private function createCurve()		{			var p:Point = new Point(0,0);			while (Math.abs(p.x) <= 250 && Math.abs(p.y) <= 250)			{				p.x=Math.cos(freqX*go*2*(1/360)*Math.PI)*Math.exp(go*d);				p.y=Math.sin(freqY*go*2*(1/360)*Math.PI)*Math.exp(go*d);				points500px.push(new Point(p.x+250,p.y+250));				pointsNDC.push(new Point(p.x/500+0.5,p.y/500+0.5));				if (steps < 100)				{					steps +=  0.4;				}				go +=  100 / steps;				counter++;			}			trace(counter + " lines");					}				private function svgFile(fileName:String, textData:String):void		{			var byteArray:ByteArray = new ByteArray();			byteArray.writeUTFBytes(textData);			var outFile:File = File.desktopDirectory;			outFile = outFile.resolvePath(fileName);			var outStream:FileStream = new FileStream();			outStream.open(outFile, FileMode.WRITE);			outStream.writeBytes(byteArray, 0, byteArray.length);			outStream.close();		}		public function drawCurve():MovieClip		{			my_line = new MovieClip;			my_line.graphics.lineStyle(1);			my_line.graphics.moveTo(250,250);			for each (var p:Point in points500px)			{								my_line.graphics.lineTo(p.x,p.y);			}			return my_line;		}		public function getNdcSVG()		{			var myData:String = "<?xml version='1.0' encoding='UTF-8' standalone='no'?>\n";			myData +=  "<svg width=\"1\" height=\"1\">\n";			myData +=  "<path d='M 0.5 0.5 ";			for each (var p:Point in pointsNDC)			{				myData +=  "L " + p.x + " " + p.y + " ";			}			myData +=  "' style='stroke:#000000;fill:none' />\n</svg>";			svgFile("pendulumNDC.svg", myData);		}		public function getSVG()		{			//trace(pointsNDC.toString());			var myData:String = "<?xml version='1.0' encoding='UTF-8' standalone='no'?>\n";			myData +=  "<svg width=\"500\" height=\"500\">\n";			myData +=  "<path d='M 250 250 ";			for each (var p:Point in points500px)			{				myData +=  "L " + p.x + " " + p.y + " ";			}			myData +=  "' style='stroke:#000000;fill:none' />\n</svg>";			svgFile("pendulum.svg", myData);		}	}}